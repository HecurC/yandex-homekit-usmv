# Yandex HomeKit
Добавляет устройства из Умного Дома Яндекса в HomeKit

> **Note**
> 
> Это перезапущенная версия [Mon4ik/homebridge-yandex](https://github.com/Mon4ik/homebridge-yandex).
>
> Старая версия имела множество багов и не самую лучшую структуру, но теперь всё будет намного лучше
 
## Установка и запуск
1. Установить через:
   - NPM:
     ```shell
     npm i -g yandex-homekit
     ```
   - Docker:
     _пока что нету, сорри)_
2. Первый запуск для создания конфигов
   ```shell
   yandex-homekit
   # напишет сверху всякие ошибки
   # но самое главное что создаст конфиги по пути:
   #  > ~/.yandex-homekit
   ```
3. Создаём API клиент на [oauth.yandex.ru](https://oauth.yandex.ru) c:
   - запрашиваемыми правами
     ```text
     iot:view
     iot:control
     ```
   - Redirect URI
     ```text
     http://<локальный IP сервера>:13370/callback
     ```
4. Открываем `~/.yandex-homekit/config.json` и настраиваем конфиг:
   ```json
   {
     "client": {
       "id": "CLIENT ID",
       "secret": "CLIENT SECRET"
     }
   }
5. Открываем повторно `yandex-homekit` и сверху будет ошибка о неверном/просроченном токене, переходим по ссылке и авторизуемся
6. Готово! Теперь можем добавить мост по QR-коду в HomeKit!

## Известные ошибки
- HomeKit не может сразу содержать `ColorTemperature` и `Hue/Saturation`, так что мне придётся танцевать с бубном для правильной работы лампочек с выбором кельвинов и цвета

[//]: # (## Поддержка)
[//]: # (Я в одиночку не смогу поддерживать всё и вся, так что вы можете скидывать в Issues форматы реальных умений &#40;см. [CONTRIBUTION.md]&#40;&#41;&#41;)